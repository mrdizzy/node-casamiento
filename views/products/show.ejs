<script src="http://cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.3.0/handlebars.min.js"></script>
<script type="text/javascript" src="/javascripts/products/show.js"></script>
<script type="text/javascript" src="/javascripts/libraries/in_groups_of.js"></script>
<link rel="stylesheet" type="text/css" href="/stylesheets/product.css">

<style type="text/css">
  .step { background-color:<%= colour_1 %>}
  .slide_background {width:374px;height:239px;margin-bottom:1px;margin-right:1px;background-color:<%= colour_1 %> }
</style>


<div id="product_page">

  <div id="product_section1">
    
<!-- 

  SLIDES 1 TO 3 

-->

      <div id="slide1" class="colour_1 slide_background"><img src="/products/<%= _id %>/attachments/medium-<%= attachments_order[0] %>" class="slide_image" /><% if ((typeof document["background_" + attachments_order[0]]) !== "undefined") {%><div class="slide_background_container">
      <%-  document["background_" + attachments_order[0]] %></div>
      <% } %></div>           
         
      <div id="slide2" class="colour_1 slide_background"><img src="/products/<%= _id %>/attachments/medium-<%= attachments_order[1] %>" class="slide_image" /><% if ((typeof  document["background_" + attachments_order[1]]) !== "undefined") {%><div class="slide_background_container">
      <%-  document["background_" + attachments_order[1]] %></div>
      <% } %></div>
        
      <div id="slide3" class="colour_1 slide_background"><img src="/products/<%= _id %>/attachments/medium-<%= attachments_order[2] %>" class="slide_image" /><% if ((typeof  document["background_" + attachments_order[2]]) !== "undefined") {%><div class="slide_background_container">
      <%-  document["background_" + attachments_order[2]] %></div>
      <% } %></div>
      
<!-- 

  PRODUCT NAME AND DESCRIPTION 

-->      
      
      <div id="slide4"><h1 class="product_name" style="text-align:center"><%= name %></h1>
        <div style="text-align:center;margin-bottom:1em"><img src="/gfx/ornamentalline.png" /></div>
      </div>
        
      <div id="slide5", style="width:374px;clear:both;">
      <p style="text-align:center;margin-top:1em;" class="shell">
    <img src="/gfx/shell.png" /></p>
    <h6 id="welcome_description">This simple, elegant collection is optionally adorned with a paper wrap and accompanying envelope, finished with a monogram bearing the names of you and your partner. A traditional, serif typeface emphasises the importance of your special day with authority and prestige.</h6></div>
  
<!-- 

  SLIDE 4 

-->    
      <div id="slide6" class="colour_1 slide_background"><img src="/products/<%= _id %>/attachments/medium-<%= attachments_order[3] %>" class="slide_image" /><% if ((typeof  document["background_" + attachments_order[3]]) !== "undefined") {%><div style="width:374px;height:239px;">
      <%-  document["background_" + attachments_order[3]]  %></div>
      <% } %></div>           
   </div>
      
<div id="product_section0"></div>  

<script type="text/javascript">

// Templates
var templates = {}
<% templates.forEach(function(template) { %>
  templates["<%= template.name %>"] = <%- template.template %>;
<% }) %>

// Setup and initialization
var thisProduct = new Product({
    id: "<%= _id %>",
    name: "<%= name %>", 
    monogram: <%= (monogram || "1") %>, 
    quantity: 10, 
    colour_1: "<%= colour_1 %>",
    colour_2: "<%= colour_2 ? colour_2 : "" %>",
    number_of_colours: <%= number_of_colours %>,
    price: <%= price %>, 
    guests: ["&hellip;","&hellip;","&hellip;","&hellip;","&hellip;","&hellip;","&hellip;","&hellip;","&hellip;","&hellip;"], 
    texture: "plain" 
});

var hex_colours = <%- JSON.stringify(colour_list) %>

var coloursInGroupsOf16 = inGroupsOf(Object.keys(hex_colours), 16)

var steps_view = new StepView();
steps_view.render();

var colour_view = new ColourView({model:thisProduct, el: $('#row')})
colour_view.render()

var quantity_view = new QuantityView()

</script>