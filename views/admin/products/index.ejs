<!-- 
    PRODUCT FORM TEMPLATE
-->

  <script type="text/template" id="current_product_form">
    <form>
      <div style="width:50%;float:left">
        <h1>{{ id }}</h1>        
     
        <p><label for="price">Name:</label></p>
        <p><input type="text" name="name" value="{{name}}"></input></p>
     
        <p><label for="price">Price:</label></p>
        <p><input type="text" name="price" value="{{price}}"></input></p>
       
        <p><label for="monogram">monogram:</label></p>
        <p><input type="text" name="monogram" value="{{monogram}}"></input></p>
        
        <p><label for="price">Description:</label></p>
        <p><textarea name="description">{{description}}</textarea></p>
        
        <p><label for="buy_it_now_id">Buy-it-now listing item number:</label></p>
        <p><input type="text" name="buy_it_now_id" value="{{buy_it_now_id}}"></input></p>
        
        <p><label for="buy_it_now_price">Buy-it-now price:</label></p>
        <p><input type="text" name="buy_it_now_price" value="{{buy_it_now_price}}"></input></p>
        
      </div>
      
      <div style="float:right;width:50%;">
      <div style="width:50%;float:left;">
      <div style="width:30px;height:30px;background-color:{{colour-1}};border:1px solid black;"></div>
        <select style="font-size:1.5em;" size="15" name="colour_1">
            {{options_selected hex_colours colour_1}}
        </select>
        </div>
        <div style="width:50%;float:right;">
      <div style="width:30px;height:30px;background-color:{{colour-2}};border:1px solid black;"></div>
        <select style="font-size:1.5em;" size="15" name="colour_2">
            {{options_selected hex_colours colour_2}}
        </select>
        </div>
      </div>
      
      <input type="submit" style="clear:both;">Submit</a>
    </form>
    <h3 style="clear:both">Attachments</h3>
  </script>
<!-- 
  IMAGE BACKGROUNDS
-->
  <script type="text/template" id="image_backgrounds">
  <div style="clear:both;width:500px;height:319px;background-color:{{first_colour}};background-image:url('new.png');" id="background_{{id}}_{{attachment}}" class="background_container">
    <img style="width:500px;position:absolute;" src="/products/{{id}}/attachments/medium-{{attachment}}" />{{divs}}
  </div>
  <textarea rows="5" cols="100" class="change_background" id="{{id}}-{{attachment}}">{{background_html}}</textarea>
  </script>


<style type="text/css">
    .attachment { text-align:center;}
</style>

<div id="themes_admin" style="float:left;width:25%;">
<h3>Themes</h3>

<ul id="theme_list"></ul>

<h2 style="border-top:1px solid black;padding-top:10px;">Add new theme</h2>
    <form>
        <p>Theme name:</p><p><input name="new_theme"></input></p>
        <p>Theme description:</p><p><textarea name="description"></textarea></p>
        <input type="submit"></input>
    </form>

</div>
<div id="products_container">
<h3>Products</h3>
<div id="products" style="float:right;width:75%;"></div>
</div>
<div id="current_product_container" style="clear:both;width:90%;margin:0 auto">
<h3>Current Product</h3>
<div id="cpv"></div>
</div>


    
<script type="text/javascript">
Handlebars.registerHelper('options_selected', function(context, test) {
    var ret = '';
    for (var i = 0; i < context.length; i++) {
        var option = '<option value="' + context[i]+'" style="background-color:' + context[i] + '" ';
        if (test.toLowerCase() == context[i].toLowerCase()) {
            option += ' selected="selected"';
        }
        option += '>'+ Handlebars.Utils.escapeExpression(context[i]) + '</option>';
        ret += option;
    }

    return new Handlebars.SafeString(ret);
});
  var colourList = <%- JSON.stringify(colours) %>
  var results = _.map(colourList, function(colour) {
      var split = colour.split(" ");
      var hex = split[0];
      var label = split[1]
      return hex
  })
  colourList = results;
  var themes_view, product_types_view
  $(function() {    
    var themes = new Themes(<%- JSON.stringify(themes) %>)
    var product_types = new ProductTypes(<%- JSON.stringify(product_types) %>);
    
    themes_view = new ThemesView({collection:themes}).render().el    
    product_types_view = new ProductTypesView({collection:product_types}).render().el    
      
    new ThemeAdminView({collection:themes}).render();
      
    var products = new Products( <%- JSON.stringify(products) %>, {parse: true} );
    
    new ProductsView({
        collection: products
    }).render();
      
  })
</script>

<script src="/javascripts/admin/products.js"></script>

<script src="/javascripts/admin/models.js"></script>