<!doctype html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1, user-scalable=no">
    <title>Casamiento</title>
    
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="stylesheet" href="/stylesheets/main.css" />    
    <link rel="stylesheet" href="/stylesheets/color_picker.css" />
    
    <script src="http://localhost:3000/javascripts/libraries/picturefill.min.js"></script>
    <script src="/javascripts/libraries/picturefill.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.1/underscore-min.js"></script>
    
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.0.0/backbone-min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.3.0/handlebars.min.js"></script>
    <script type="text/javascript" src="/javascripts/libraries/backbone_syphon.js"></script>
    
    <script src="/javascripts/libraries/color_picker.js"></script>
    <style type="text/css">
        <%- inline_styles %>
    </style>
  </head>

  <body>
    
    <div id="page_container">
      <div id="inner_page_container">
          <div id="header_container">
            <a href="/"><img src="http://www.casamiento.co.uk/gfx/logo/cas.png" id="logo"></a>
            
            <div style="position:relative">
          
              <div id="slogan_container">
                <img src="http://www.casamiento.co.uk/gfx/logo/drms.png" id="dreams_slogan">
              </div>
              
              <div class="nav_link" id="about">
                <div style="padding-top:15px;height:35px;border-left:1px dotted grey;text-align:center;">
                  <img src="/gfx/bullets/line_diamond.png" /> About
                </div>
              </div>
              
             <a href="/products"><div id="browse" class="browse nav_link">
                <div>
                  <img src="/gfx/bullets/line_diamond.png" /> Browse designs
                </div>
              </div></a>
              
              <div class="nav_link">
                <div style="padding-top:15px;height:35px;text-align:center;">
                  <img src="/gfx/bullets/line_diamond.png" />  Contact us
                </div>
              </div>
            </div>
            
        <div style="clear:both;"></div>
        
      </div>
       
      <div class="left_column"><%- left %></div>       
      <div class="right_column"><%- right %></div>
     
      <div id="footer">
        <div class="genesis_collection"><img src="/gfx/logo/gen_compact.png" style="width:160px"/></div>
        <div class="footer_seperator"><img src="/gfx/three_across.png" style="width:60px"/></div>
        <div class="castello_collection"><img src="/gfx/logo/castello.png" style="width:250px;" /></div>
      </div>
      
      <div style="clear:both;"></div>
    </div>
  </body>
</html>

<script>
/*$('.browse').mouseover(function() {
  $('#designs').show();
  $('#browse div').css("border", "0")
  $('#browse').css("border", "1px solid black")
  $('#browse').css("border-bottom", 0)
  
})

$('.browse').mouseout(function() {
  $('#designs').hide();
  
  $('#browse').css("border", "0")
  $('#browse div').css("border", "1px dashed grey")
})*/

Backbone.Syphon.InputReaders.register('checkbox', function($el){
    return $el.prop('checked') ? $el.val() : false;
});
var TagsView = Backbone.View.extend({
    events: {
      'click [type="checkbox"]': 'selectTag'
    },
    selectTag: function(e) {
    $('#search_results').empty();
      var serialized = Backbone.Syphon.serialize(this);
      
      var result = []
      for(var prop in serialized) {
        if(serialized[prop]) {
          result.push(prop)
        }
      }
      result.sort();
      if(result) {
      $('.loading').show();
        $.post("/search",  {tags: result }, function(data) {
        $('.loading').hide();
          $('#search_results').html(data)
        })
      }
    }
})

var tv = new TagsView({el: $('#designs')});

</script>

