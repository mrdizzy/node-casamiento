<html>

<head>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.3.3/underscore-min.js"></script>

  <script type="text/javascript">
    var quantities_discount = {
      1: 0,
      10: 0,
      25: 10,
      50: 20
    }

    var card_styles = {
      flat: (4.99 / 10),
      foldout: (6.99 / 10)
    }

    var rsvps = {
      no: 0,
      yes: 0.20
    }
    var envelopes = {
      none: 0,
      blank: 0.15,
      matching: 0.20,
      matching_address: 0.27

    }
    var embellishments = {
      none: 0,
      pearl: 1.29,
      ribbon: 0.55,
      curl: 0.35,
      wrap: 0.20,
    }
var counter = 0;
    var results = ""

    $(function() {
      [1, 10, 25, 50].forEach(function(quantity) {

        results += "<h1>" + quantity + "</h1>";


        ["flat", "foldout"].forEach(function(format) {
         
          results += "<b>" + format + "</b>: "
          results += "<ul>"
          for (var key in envelopes) {
            if (envelopes.hasOwnProperty(key)) {
              results += "<li>envelopes: " + key + " - "
            }
            results += "<ul>"
            for (var embellishment in embellishments) {

              if (embellishments.hasOwnProperty(embellishment)) {
                results += "<li>embellishments: " + embellishment + "</li>"
              }

              results += "<ul>"
              for (var rsvp in rsvps) {

                if (rsvps.hasOwnProperty(rsvp)) {
                  
         var total =  (card_styles[format] + envelopes[key] + embellishments[embellishment] + rsvps[rsvp])* quantity
         var total = total - ((quantities_discount[quantity] /100) * total)
                  results += "<li>RSVP: " + rsvp + " <b>" + total + "</b> ------" + counter + "</li>"
                  counter= counter + 1;
                }

              }

              results += "</ul>"

            }
            results += "</ul>"

          }

          results += "</ul><hr/>";
        })
      })
      $('#results').html(results)
      
    $('#results').append("<h1>" + counter + "</h1>")
    });
  </script>
</head>

<body>
  <div id="results"></div>
</body>

</html>