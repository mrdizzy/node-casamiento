#!/usr/bin/env node
var migrator = require('./../index'),
    cli = require('commander');
    cli.on('--help', function() {
        console.log('Use one of the following commands:');
        console.log('');
        console.log('    dump - dumps database specified by --database into a JSON file');
        console.log('    load - imports database in file specified by --file into database specified by --database');
        console.log('    create - creates a database named by --database and then imports --file');
        console.log('    reset - resets database named by --database and then imports --file');
    });
    cli.version('0.0.1')
    .option('-d, --database [name]', "Database name")
    .option('-f, --file [filename]', "Source file/output file");
    
    
    cli.parse(process.argv);
    
var callback = function(err, response) {
    console.log(err, response);
}

if (!cli.file && cli.args[0] != "create") {
    cli.file = require("./../../../config/" + cli.database)
    cli.design_file = require("./../../../config/" + cli.database + "_design")
}


migrator[cli.args[0]](cli, callback)  