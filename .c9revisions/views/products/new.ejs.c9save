{"ts":1358806378353,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"<html>\n<head>\n<script src=\"http://cdnjs.cloudflare.com/ajax/libs/jquery/1.8.0/jquery-1.8.0.min.js\" type=\"text/javascript\"></script>\n<script src=\"http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.3.3/underscore-min.js\" type=\"text/javascript\"></script>\n<script src=\"http://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.2/backbone-min.js\" type=\"text/javascript\"></script>\n<script type=\"text/template\" id=\"add_image_form\">\n<p>\n   Thumb: <input type=\"file\" name=\"thumb-{{counter}}\"></input></p>\n   <p>\n   Display: <input type=\"file\" name=\"display-{{counter}}\"></input></p>\n   \n   \n   <p>\n   Medium: <input type=\"file\" name=\"medium-{{counter}}\"></input></p>\n   <p>\n   Large: <input type=\"file\" name=\"large-{{counter}}\"></input></p>\n   <p class=\"remove\">Remove</p>\n</script>\n\n<script type=\"text/javascript\">\n_.templateSettings = {\n  interpolate : /\\{\\{(.+?)\\}\\}/g\n};\n$(function() {\n    var Counter = Backbone.Model.extend({\n        defaults: {\n            value: 0\n        }\n        });\n        var counter = new Counter();\n    var ImageFormView = Backbone.View.extend({\n\n            events: {\n            'click .remove': 'destroy'\n        },\n        destroy: function() {\n            this.remove();\n        },\n        render: function() {\n               var template = $('#add_image_form').html(),\n               \n               compiled = _.template(template, { counter: this.model.get(\"value\")});\n              this.$el.html(compiled);\n               return this;\n        }\n    })\n    var MainForm = Backbone.View.extend({\n        el: 'form',\n        events: {\n            'click #add_image': 'addImageForm'   \n        },\n        addImageForm: function() {\n            this.model.set(\"value\", this.model.get(\"value\") + 1);\n            new ImageFormView({model: counter}).render().$el.insertAfter(this.$('#add_image'))\n        }\n        \n    })\n    new MainForm({model: counter });\n});\n</script>\n</head>\n<body>\n\n<form id=\"new_product\" action=\"/products\" method=\"POST\" enctype=\"multipart/form-data\">\n\n<p>\nTheme:\n<select name=\"theme\">\n<% themes.forEach(function(theme) { %>\n<option value=\"<%= theme%>\"><%= theme %></option>\n<% }) %>\n</select>\n</p>\n\n<p>\nProduct Type:\n<select name=\"product_type\">\n<% product_types.forEach(function(type) { %>\n<option value=\"<%= type %>\"><%= type %></option>\n<% }) %>\n</select>\n</p>\n<p id=\"add_image\">Add Image</p>\n<input type=\"submit\"></input>\n</form>\n</body>\n</html>"]],"start1":0,"start2":0,"length1":0,"length2":2398}]],"length":2398}
{"contributors":[],"silentsave":false,"ts":1358806397590,"patch":[[{"diffs":[[0,"ction=\"/"],[1,"admin/"],[0,"products"]],"start1":1937,"start2":1937,"length1":16,"length2":22}]],"length":2404,"saved":false}
{"contributors":[],"silentsave":false,"ts":1360078592375,"patch":[[{"diffs":[[0,"rm\">\n<p>"],[-1,"\n   "],[0,"Thumb: <"]],"start1":419,"start2":419,"length1":20,"length2":16},{"diffs":[[0,"</p>\n   "],[1,"\n"],[0,"<p>"],[-1,"\n   "],[0,"Display:"]],"start1":486,"start2":486,"length1":23,"length2":20},{"diffs":[[0,"/p>\n"],[-1,"   \n   \n   <p>\n   "],[1,"\n<p>"],[0,"Medi"]],"start1":562,"start2":562,"length1":26,"length2":12},{"diffs":[[0,"/p>\n"],[-1,"   <p>\n   "],[1,"\n<p>"],[0,"Larg"]],"start1":632,"start2":632,"length1":18,"length2":12},{"diffs":[[0,"></p>\n  "],[-1," "],[1,"\n"],[0,"<p class"]],"start1":698,"start2":698,"length1":17,"length2":17}]],"length":2377,"saved":false}
{"ts":1360078603991,"patch":[[{"diffs":[[0,"ript\"></script>\n"],[1,"\n"],[0,"<script type=\"te"]],"start1":358,"start2":358,"length1":32,"length2":33},{"diffs":[[0,"_form\">\n"],[1,"    "],[0,"<p>Thumb"]],"start1":417,"start2":417,"length1":16,"length2":20},{"diffs":[[0,"</p>\n   "],[-1,"\n"],[1,"    \n    "],[0,"<p>Displ"]],"start1":491,"start2":491,"length1":17,"length2":25},{"diffs":[[0,"ut></p>\n"],[-1,"\n"],[1,"    \n    "],[0,"<p>Mediu"]],"start1":571,"start2":571,"length1":17,"length2":25},{"diffs":[[0,"ut></p>\n"],[-1,"\n"],[1,"    \n    "],[0,"<p>Large"]],"start1":649,"start2":649,"length1":17,"length2":25},{"diffs":[[0,"></p>\n  "],[-1,"\n"],[1,"    \n    "],[0,"<p class"]],"start1":727,"start2":727,"length1":17,"length2":25},{"diffs":[[0,"ove</p>\n"],[1,"\n"],[0,"</script"]],"start1":765,"start2":765,"length1":16,"length2":17},{"diffs":[[0,"/p>\n\n</script>\n\n"],[1,"\n"],[0,"<script type=\"te"]],"start1":769,"start2":769,"length1":32,"length2":33}]],"length":2416,"saved":false}
{"ts":1360078612127,"patch":[[{"diffs":[[0,"</input></p>"],[-1,"\n"],[0,"       \n    "]],"start1":483,"start2":483,"length1":25,"length2":24},{"diffs":[[0,"}}\"></input></p>"],[-1,"\n"],[0,"    \n    <p>Medi"]],"start1":561,"start2":561,"length1":33,"length2":32},{"diffs":[[0,"</input></p>"],[-1,"\n"],[0,"    \n    <p>"]],"start1":642,"start2":642,"length1":25,"length2":24},{"diffs":[[0,"</p>\n      \n"],[1,""],[0,"    <p class"]],"start1":725,"start2":725,"length1":24,"length2":24},{"diffs":[[0,"ove</p>\n"],[-1,"\n"],[0,"</script"]],"start1":762,"start2":762,"length1":17,"length2":16}]],"length":2412,"saved":false}
{"ts":1360078621918,"patch":[[{"diffs":[[0,"cript\">\n"],[1,"\n"],[0,"_.templa"]],"start1":806,"start2":806,"length1":16,"length2":17},{"diffs":[[0,"\\}/g\n};\n"],[1,"\n"],[0,"$(functi"]],"start1":866,"start2":866,"length1":16,"length2":17}]],"length":2414,"saved":false}
