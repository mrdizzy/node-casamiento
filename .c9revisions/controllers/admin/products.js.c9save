{"ts":1351454557260,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1351454572663,"patch":[[{"diffs":[[1,"exports.index = function(req, res) {\n    console.log(req.params); \n});"]],"start1":0,"start2":0,"length1":0,"length2":70}]],"length":70,"saved":false}
{"ts":1351454613328,"patch":[[{"diffs":[[0,"ams); \n}"],[-1,")"],[0,";"]],"start1":60,"start2":60,"length1":10,"length2":9}]],"length":69,"saved":false}
{"ts":1351455018528,"patch":[[{"diffs":[[1,"var db = require('couchdb-migrator').databases.test_ebay,\r\n    async = require('async'),\r\n    fs = require('fs'),\r\n    themes = [\"ace_of_hearts\", \"simplicity\", \"rose\", \"chequers\", \"birds_of_paradise\", \"border\"],\r\n    product_types = [\"invitation\", \"name_place\", \"wrap\", \"rsvp\", \"envelope\"]\r\n\r\nexports.update = function(req, res) {\r\n    db.save(req.body, function(err, documents) {\r\n        if (err) {\r\n            console.log(err)\r\n            res.status(500);\r\n            res.end();\r\n        }\r\n        else {\r\n            console.log(\"DONE\", documents);\r\n            req.body._rev = documents.rev;\r\n            res.json(req.body)\r\n            res.end();\r\n        }\r\n    });\r\n}\r\n\r\n"],[0,"exports."]],"start1":0,"start2":0,"length1":8,"length2":691},{"diffs":[[0,", res) {"],[1,"\r"],[0,"\n    con"]],"start1":711,"start2":711,"length1":16,"length2":17},{"diffs":[[0,"req."],[-1,"params); \n};"],[1,"accepted);\r\n    db.view('all/type', {\r\n        key: 'product'\r\n    }, function(err, documents) {\r\n        res.render(\"products/index\", {\r\n            products: documents.toArray(),\r\n            themes: themes,\r\n            product_types: product_types\r\n        })\r\n    });\r\n};\r\n\r\nexports.create = function(req, res) {\r\n    collateAttachments(req, function(err, collated) {\r\n        var id = req.body.theme + \"-\" + req.body.product_type; // theme_name-product_type\r\n        db.save(id, {\r\n            _attachments: collated,\r\n            type: \"product\"\r\n        }, function(err, doc) {\r\n            console.log(err, doc)\r\n        })\r\n    })\r\n}\r\n\r\nfunction collateAttachments(req, callback) {\r\n    var collated = {}\r\n    async.forEach(Object.keys(req.files), function(key, callback) {\r\n        var thisFile = req.files[key];\r\n        if (thisFile.size > 0) {\r\n            fs.readFile(thisFile.path, function(err, data) {\r\n\r\n                collated[key] = {}\r\n                collated[key][\"content_type\"] = \"image/png\";\r\n                collated[key][\"data\"] = data.toString('base64');\r\n\r\n                callback(err);\r\n            })\r\n        }\r\n        else {\r\n            callback(null)\r\n        }\r\n    }, function(err) {\r\n        if (err == null) {\r\n            callback(null, collated)\r\n        }\r\n        else {\r\n            callback(null)\r\n        }\r\n    })\r\n}\r\n\r\nexports.new = function(req, res) {\r\n    res.render('products/new.ejs', {\r\n        themes: themes,\r\n        product_types: product_types\r\n    })\r\n}"]],"start1":737,"start2":737,"length1":16,"length2":1522}]],"length":2259,"saved":false}
{"ts":1351455058502,"patch":[[{"diffs":[[0," {\r\n"],[-1,"    console.log(req.accepted);\r\n"],[0,"    "]],"start1":717,"start2":717,"length1":40,"length2":8}]],"length":2227,"saved":false}
{"ts":1351455138410,"patch":[[{"diffs":[[0,"render(\""],[1,"admin/"],[0,"products"]],"start1":819,"start2":819,"length1":16,"length2":22}]],"length":2233,"saved":false}
{"contributors":[],"silentsave":false,"ts":1351612003100,"patch":[[{"diffs":[[0,"res) {\r\n    "],[1,"console.log(req.body);\r\n    //"],[0,"db.save(req."]],"start1":324,"start2":324,"length1":24,"length2":54},{"diffs":[[0,"cuments) {\r\n    "],[1,"//"],[0,"    if (err) {\r\n"]],"start1":400,"start2":400,"length1":32,"length2":34},{"diffs":[[0,"if (err) {\r\n    "],[1,"//"],[0,"        console."]],"start1":422,"start2":422,"length1":32,"length2":34},{"diffs":[[0,"g(err)\r\n    "],[1,"//"],[0,"        res."]],"start1":458,"start2":458,"length1":24,"length2":26},{"diffs":[[0,"atus(500);\r\n    "],[1,"//"],[0,"        res.end("]],"start1":486,"start2":486,"length1":32,"length2":34},{"diffs":[[0,"res.end();\r\n    "],[1,"//"],[0,"    }\r\n        e"]],"start1":512,"start2":512,"length1":32,"length2":34},{"diffs":[[0,"   //    }\r\n    "],[1,"//"],[0,"    else {\r\n    "]],"start1":525,"start2":525,"length1":32,"length2":34},{"diffs":[[0,"    else {\r\n    "],[1,"//"],[0,"        console."]],"start1":543,"start2":543,"length1":32,"length2":34},{"diffs":[[0,"ocuments);\r\n    "],[1,"//"],[0,"        req.body"]],"start1":590,"start2":590,"length1":32,"length2":34},{"diffs":[[0,"s.rev;\r\n    "],[1,"//"],[0,"        res."]],"start1":640,"start2":640,"length1":24,"length2":26},{"diffs":[[0,".body)\r\n    "],[1,"//"],[0,"        res."]],"start1":674,"start2":674,"length1":24,"length2":26},{"diffs":[[0,"end();\r\n    "],[1,"//"],[0,"    }\r\n    }"]],"start1":700,"start2":700,"length1":24,"length2":26},{"diffs":[[0,"/    }\r\n    "],[1,"//"],[0,"});\r\n}\r\n\r\nex"]],"start1":713,"start2":713,"length1":24,"length2":26}]],"length":2287,"saved":false}
{"ts":1351612327127,"patch":[[{"diffs":[[0,"\r\n\r\n"],[-1,"exports.update = function(req, res) {\r\n    console.log(req.body);\r\n    //db.save(req.body, function(err, documents) {\r\n    //    if (err) {\r\n    //        console.log(err)\r\n    //        res.status(500);\r\n    //        res.end();\r\n    //    }\r\n    //    else {\r\n    //        console.log(\"DONE\", documents);\r\n    //        req.body._rev = documents.rev;\r\n    //        res.json(req.body)\r\n    //        res.end();\r\n    //    }\r\n    //});\r\n}\r\n\r\n"],[0,"expo"]],"start1":289,"start2":289,"length1":452,"length2":8}]],"length":1843,"saved":false}
{"contributors":[],"silentsave":false,"ts":1351719953784,"patch":[[{"diffs":[[0,"_ebay,\r\n"],[1,"collate_attachments = require('./../lib/collate_attachments');\r\n"],[0,"    asyn"]],"start1":51,"start2":51,"length1":16,"length2":80},{"diffs":[[0,"\r\n\r\n"],[-1,"function collateAttachments(req, callback) {\r\n    var collated = {}\r\n    async.forEach(Object.keys(req.files), function(key, callback) {\r\n        var thisFile = req.files[key];\r\n        if (thisFile.size > 0) {\r\n            fs.readFile(thisFile.path, function(err, data) {\r\n\r\n                collated[key] = {}\r\n                collated[key][\"content_type\"] = \"image/png\";\r\n                collated[key][\"data\"] = data.toString('base64');\r\n\r\n                callback(err);\r\n            })\r\n        }\r\n        else {\r\n            callback(null)\r\n        }\r\n    }, function(err) {\r\n        if (err == null) {\r\n            callback(null, collated)\r\n        }\r\n        else {\r\n            callback(null)\r\n        }\r\n    })\r\n}\r\n\r\n"],[0,"expo"]],"start1":1032,"start2":1032,"length1":733,"length2":8}]],"length":1182,"saved":false}
{"ts":1351720000103,"patch":[[{"diffs":[[0,"e('."],[-1,"/."],[0,"./li"]],"start1":87,"start2":87,"length1":10,"length2":8}]],"length":1180,"saved":false}
{"ts":1351720014533,"patch":[[{"diffs":[[0,"quire('."],[1,"/../."],[0,"./lib/co"]],"start1":83,"start2":83,"length1":16,"length2":21}]],"length":1185,"saved":false}
{"contributors":[],"silentsave":false,"ts":1358806450465,"patch":[[{"diffs":[[0,"hments')"],[-1,";"],[1,","],[0,"\r\n    as"]],"start1":115,"start2":115,"length1":17,"length2":17}]],"length":1185,"saved":false}
{"ts":1358806496162,"patch":[[{"diffs":[[0,"ay,\r\ncollate"],[-1,"_a"],[1,"A"],[0,"ttachments ="]],"start1":54,"start2":54,"length1":26,"length2":25}]],"length":1184,"saved":false}
{"ts":1358806522572,"patch":[[{"diffs":[[0,"hments')"],[-1,","],[1,";"],[0,"\r\n    as"]],"start1":114,"start2":114,"length1":17,"length2":17}]],"length":1184,"saved":false}
{"ts":1358806526421,"patch":[[{"diffs":[[0,");\r\n    "],[1,"vat "],[0,"async = "]],"start1":121,"start2":121,"length1":16,"length2":20}]],"length":1188,"saved":false}
{"ts":1358806529098,"patch":[[{"diffs":[[0,"\r\n    va"],[-1,"t"],[1,"r"],[0," async ="]],"start1":123,"start2":123,"length1":17,"length2":17}]],"length":1188,"saved":false}
{"ts":1358806763616,"patch":[[{"diffs":[[0,");\r\n"],[-1,"    var async = require('async'),\r\n    fs = require('fs'),\r\n"],[0,"    "]],"start1":121,"start2":121,"length1":68,"length2":8}]],"length":1128,"saved":false}
{"ts":1358806766854,"patch":[[{"diffs":[[0,"hments')"],[-1,";"],[1,","],[0,"\r\n    th"]],"start1":114,"start2":114,"length1":17,"length2":17}]],"length":1128,"saved":false}
{"ts":1358807736275,"patch":[[{"diffs":[[0,"\"border\""],[1,", \"eloquent\""],[0,"],\r\n    "]],"start1":211,"start2":211,"length1":16,"length2":28}]],"length":1140,"saved":false}
{"ts":1358807738065,"patch":[[{"diffs":[[0,"\"eloquen"],[-1,"t"],[1,"ce"],[0,"\"],\r\n   "]],"start1":221,"start2":221,"length1":17,"length2":18}]],"length":1141,"saved":false}
{"contributors":[],"silentsave":false,"ts":1362408611152,"patch":[[{"diffs":[[0,");\r\n};\r\n"],[1,"exports.update = function(req, res) {\r\n    console.log(\"Updating\", req.body)\r\n}"],[0,"\r\nexport"]],"start1":618,"start2":618,"length1":16,"length2":95}]],"length":1220,"saved":false}
{"ts":1362408648062,"patch":[[{"diffs":[[0,"};\r\n"],[-1,"exports.update = function(req, res) {\r\n    console.log(\"Updating\", req.body)\r\n}\r\n"],[0,"expo"]],"start1":622,"start2":622,"length1":89,"length2":8}]],"length":1139,"saved":false}
{"ts":1362408846299,"patch":[[{"diffs":[[0,");\r\n};\r\n"],[1,"\r\n\r\nexports.update = function(req, res) {\r\n    console.log(req.body)\r\n    db.save(req.body, function(err, documents) {\r\n        if (err) {\r\n            res.status(500);\r\n            res.end();\r\n        }\r\n        else {\r\n            db.get(documents.id, function(error, response) {\r\n                res.json(response)\r\n                res.end();\r\n            })\r\n        }\r\n\r\n    });\r\n}\r\n\r\n"],[0,"exports."]],"start1":618,"start2":618,"length1":16,"length2":406}]],"length":1529,"saved":false}
{"ts":1362408960444,"patch":[[{"diffs":[[0,"\r\n\r\n"],[-1,"exports.update = function(req, res) {\r\n    console.log(req.body)\r\n    db.save(req.body, function(err, documents) {\r\n        if (err) {\r\n            res.status(500);\r\n            res.end();\r\n        }\r\n        else {\r\n            db.get(documents.id, function(error, response) {\r\n                res.json(response)\r\n                res.end();\r\n            })\r\n        }\r\n\r\n    });\r\n}\r\n\r\n"],[0,"expo"]],"start1":626,"start2":626,"length1":394,"length2":8}]],"length":1143,"saved":false}
{"contributors":[],"silentsave":false,"ts":1362408987877,"patch":[[{"diffs":[[0,");\r\n};\r\n\r\n\r\n"],[1,"exports.update = function(req, res) {\r\n    console.log(req.body)\r\n    db.save(req.body, function(err, documents) {\r\n        if (err) {\r\n            res.status(500);\r\n            res.end();\r\n        }\r\n        else {\r\n            db.get(documents.id, function(error, response) {\r\n                res.json(response)\r\n                res.end();\r\n            })\r\n        }\r\n\r\n    });\r\n}\r\n\r\n"],[0,"exports.crea"]],"start1":618,"start2":618,"length1":24,"length2":410}]],"length":1529,"saved":false}
{"contributors":[],"silentsave":false,"ts":1362409989710,"patch":[[{"diffs":[[0,"ole.log("],[1,"\"Body requesting\"<"],[0,"req.body"]],"start1":677,"start2":677,"length1":16,"length2":34}]],"length":1547,"saved":false}
{"ts":1362409990987,"patch":[[{"diffs":[[0,"ing\""],[-1,"<"],[1,", "],[0,"req."]],"start1":698,"start2":698,"length1":9,"length2":10}]],"length":1548,"saved":false}
{"ts":1362409995541,"patch":[[{"diffs":[[0,"og(\""],[-1,"Body reques"],[1,"Upda"],[0,"ting"]],"start1":682,"start2":682,"length1":19,"length2":12}]],"length":1541,"saved":false}
{"ts":1362410104330,"patch":[[{"diffs":[[0,"\r\n\r\n"],[-1,"\r\nexports.update = function(req, res) {\r\n    console.log(\"Updating\", req.body)\r\n    db.save(req.body, function(err, documents) {\r\n        if (err) {\r\n            res.status(500);\r\n            res.end();\r\n        }\r\n        else {\r\n            db.get(documents.id, function(error, response) {\r\n                res.json(response)\r\n                res.end();\r\n            })\r\n        }\r\n\r\n    });\r\n}"],[0,"\r\n\r\n"]],"start1":624,"start2":624,"length1":404,"length2":8}]],"length":1145,"saved":false}
{"ts":1362410463331,"patch":[[{"diffs":[[0,"\n   "],[-1," collateAttachments(req, function(err, collated) {\r\n        var id = req.body.theme + \"-\" + req.body.product_type; // theme_name-product_type\r\n        db.save(id, {\r\n            _attachments: collated,\r\n            type: \"product\"\r\n        }, function(err, doc) {\r\n            console.log(err, doc)\r\n        })\r\n    })"],[0,"\r\n}\r"]],"start1":670,"start2":670,"length1":326,"length2":8}]],"length":827,"saved":false}
{"contributors":[],"silentsave":false,"ts":1362515952922,"patch":[[{"diffs":[[0,"        "],[1,"start"],[0,"key: 'pr"]],"start1":381,"start2":381,"length1":16,"length2":21},{"diffs":[[0,"product'"],[1,",\r\n        endkey: 'theme'"],[0,"\r\n    },"]],"start1":400,"start2":400,"length1":16,"length2":42},{"diffs":[[0,"\r\n\r\n"],[-1,"\r\nexports.create = function(req, res) {\r\n   "],[1,"exports.update = function(req, res) {\r\n    console.log(req.body)\r\n    db.save(req.body, function(err, documents) {\r\n        if (err) {\r\n            res.status(500);\r\n            res.end();\r\n        }\r\n        else {\r\n            db.get(documents.id, function(error, response) {\r\n                res.json(response)\r\n                res.end();\r\n            })\r\n        }\r\n\r\n    });\r\n}\r\n\r\nexports.create = function(req, res) {\r\n    collateAttachments(req, function(err, collated) {\r\n        var id = req.body.theme + \"-\" + req.body.product_type; // theme_name-product_type\r\n        db.save(id, {\r\n            _attachments: collated,\r\n            type: \"product\"\r\n        }, function(err, doc) {\r\n            console.log(err, doc)\r\n        })\r\n    })"],[0,"\r\n}\r"]],"start1":657,"start2":657,"length1":52,"length2":754}]],"length":1560,"saved":false}
{"ts":1362516041569,"patch":[[{"diffs":[[0,"st_ebay,"],[-1,"\r"],[0,"\n"],[1,"    "],[0,"collateA"]],"start1":49,"start2":49,"length1":18,"length2":21},{"diffs":[[0,"ments'),"],[-1,"\r"],[0,"\n    the"]],"start1":118,"start2":118,"length1":17,"length2":16},{"diffs":[[0,"uence\"],"],[-1,"\r"],[0,"\n    pro"]],"start1":228,"start2":228,"length1":17,"length2":16},{"diffs":[[0,"velope\"]"],[-1,"\r\n\r\n"],[1,"\n\n    "],[0,"exports."]],"start1":305,"start2":305,"length1":20,"length2":22},{"diffs":[[0,", res) {"],[-1,"\r"],[0,"\n"],[1,"   "],[0,"    "],[1," "],[0,"db.view("]],"start1":347,"start2":347,"length1":22,"length2":25},{"diffs":[[0,"all/type', {"],[-1,"\r"],[0,"\n        sta"]],"start1":373,"start2":373,"length1":25,"length2":24},{"diffs":[[0,"    "],[-1,"start"],[1,"    "],[0,"key: '"],[-1,"product',\r\n        endkey: 'theme'\r\n"],[1,"theme'\n        }, function(error, themes) {\n            db.view('all/type', {\n                startkey: 'product',\n        "],[0,"    "]],"start1":390,"start2":390,"length1":55,"length2":141},{"diffs":[[0,"ments) {"],[-1,"\r"],[0,"\n"],[1,"     "],[0,"        "],[1,"   "],[0,"res.rend"]],"start1":552,"start2":552,"length1":26,"length2":33},{"diffs":[[0,"ndex\", {"],[-1,"\r"],[0,"\n"],[1,"    "],[0,"        "]],"start1":605,"start2":605,"length1":18,"length2":21},{"diffs":[[0,"            "],[1,"    "],[0,"products: do"]],"start1":618,"start2":618,"length1":24,"length2":28},{"diffs":[[0,"Array(),"],[-1,"\r"],[0,"\n"],[1,"   "],[0,"        "]],"start1":656,"start2":656,"length1":18,"length2":20},{"diffs":[[0,"\n               "],[1,"     "],[0,"themes: themes,\r"]],"start1":664,"start2":664,"length1":32,"length2":37},{"diffs":[[0,"  themes: themes"],[1,".toArray()"],[0,","],[-1,"\r"],[0,"\n            pro"]],"start1":683,"start2":683,"length1":34,"length2":43},{"diffs":[[0,"(),\n            "],[1,"        "],[0,"product_types: p"]],"start1":707,"start2":707,"length1":32,"length2":40},{"diffs":[[0,"ypes"],[-1,"\r"],[0,"\n"],[1,"       "],[0,"        "],[1," "],[0,"})"],[-1,"\r"],[0,"\n    "],[-1,"});\r\n};\r\n\r\n\r"],[1,"        });\n        })\n    };\n"],[0,"\nexp"]],"start1":755,"start2":755,"length1":38,"length2":62},{"diffs":[[0,"(req, res) {"],[-1,"\r"],[0,"\n    console"]],"start1":839,"start2":839,"length1":25,"length2":24},{"diffs":[[0,"eq.body)"],[-1,"\r"],[0,"\n    db."]],"start1":869,"start2":869,"length1":17,"length2":16},{"diffs":[[0,"documents) {"],[-1,"\r"],[0,"\n        if "]],"start1":914,"start2":914,"length1":25,"length2":24},{"diffs":[[0," (err) {"],[-1,"\r"],[0,"\n       "]],"start1":937,"start2":937,"length1":17,"length2":16},{"diffs":[[0,"us(500);"],[-1,"\r"],[0,"\n       "]],"start1":966,"start2":966,"length1":17,"length2":16},{"diffs":[[0,"      res.end();"],[-1,"\r"],[0,"\n        }\r\n    "]],"start1":981,"start2":981,"length1":33,"length2":32},{"diffs":[[0,"       }"],[-1,"\r"],[0,"\n       "]],"start1":999,"start2":999,"length1":17,"length2":16},{"diffs":[[0,"  else {"],[-1,"\r"],[0,"\n       "]],"start1":1014,"start2":1014,"length1":17,"length2":16},{"diffs":[[0,"ponse) {"],[-1,"\r"],[0,"\n       "]],"start1":1075,"start2":1075,"length1":17,"length2":16},{"diffs":[[0,"esponse)"],[-1,"\r"],[0,"\n       "]],"start1":1110,"start2":1110,"length1":17,"length2":16},{"diffs":[[0,"s.end();"],[-1,"\r"],[0,"\n       "]],"start1":1137,"start2":1137,"length1":17,"length2":16},{"diffs":[[0,"          })"],[-1,"\r"],[0,"\n        }\r\n"]],"start1":1148,"start2":1148,"length1":25,"length2":24},{"diffs":[[0,"   }"],[-1,"\r\n\r"],[1,"\n"],[0,"\n    });"],[-1,"\r"],[0,"\n}"],[-1,"\r\n\r"],[1,"\n"],[0,"\nexp"]],"start1":1166,"start2":1166,"length1":25,"length2":20},{"diffs":[[0,"(req, res) {"],[-1,"\r"],[0,"\n    collate"]],"start1":1208,"start2":1208,"length1":25,"length2":24},{"diffs":[[0,"lated) {"],[-1,"\r"],[0,"\n       "]],"start1":1266,"start2":1266,"length1":17,"length2":16},{"diffs":[[0,"uct_type"],[-1,"\r"],[0,"\n       "]],"start1":1356,"start2":1356,"length1":17,"length2":16},{"diffs":[[0,"ve(id, {"],[-1,"\r"],[0,"\n       "]],"start1":1378,"start2":1378,"length1":17,"length2":16},{"diffs":[[0,"ollated,"],[-1,"\r"],[0,"\n       "]],"start1":1414,"start2":1414,"length1":17,"length2":16},{"diffs":[[0,"product\""],[-1,"\r"],[0,"\n       "]],"start1":1442,"start2":1442,"length1":17,"length2":16},{"diffs":[[0,", doc) {"],[-1,"\r"],[0,"\n       "]],"start1":1474,"start2":1474,"length1":17,"length2":16},{"diffs":[[0,"rr, doc)"],[-1,"\r"],[0,"\n       "]],"start1":1508,"start2":1508,"length1":17,"length2":16},{"diffs":[[0,"  })"],[-1,"\r"],[0,"\n    })"],[-1,"\r"],[0,"\n}"],[-1,"\r\n\r"],[1,"\n"],[0,"\nexp"]],"start1":1523,"start2":1523,"length1":22,"length2":18},{"diffs":[[0,", res) {"],[-1,"\r"],[0,"\n    res"]],"start1":1564,"start2":1564,"length1":17,"length2":16},{"diffs":[[0,".ejs', {"],[-1,"\r"],[0,"\n       "]],"start1":1601,"start2":1601,"length1":17,"length2":16},{"diffs":[[0," themes,"],[-1,"\r"],[0,"\n       "]],"start1":1625,"start2":1625,"length1":17,"length2":16},{"diffs":[[0,"ypes"],[-1,"\r"],[0,"\n    })"],[-1,"\r"],[0,"\n}"]],"start1":1666,"start2":1666,"length1":15,"length2":13}]],"length":1679,"saved":false}
{"ts":1362516297365,"patch":[[{"diffs":[[0,"'),\n"],[-1,"    themes = [\"ace_of_hearts\", \"simplicity\", \"rose\", \"chequers\", \"birds_of_paradise\", \"border\", \"eloquence\"],\n"],[0,"    "]],"start1":123,"start2":123,"length1":118,"length2":8}]],"length":1569,"saved":false}
{"ts":1362516338324,"patch":[[{"diffs":[[0,"error, t"],[-1,"hemes"],[0,") {\n    "]],"start1":321,"start2":321,"length1":21,"length2":16},{"diffs":[[0,"hemes: t"],[-1,"hemes"],[0,".toArray"]],"start1":571,"start2":571,"length1":21,"length2":16}]],"length":1559,"saved":false}
{"ts":1362516384677,"patch":[[{"diffs":[[0,"error, t) {\n"],[1,"            console.log(t)\n"],[0,"            "]],"start1":321,"start2":321,"length1":24,"length2":51}]],"length":1586,"saved":false}
{"contributors":[],"silentsave":false,"ts":1362516603408,"patch":[[{"diffs":[[0,"re('"],[-1,"couchdb-migrator')."],[1,"./../../config/"],[0,"database"],[-1,"s."],[1,"')"],[0,"test"]],"start1":14,"start2":14,"length1":37,"length2":33}]],"length":1582,"saved":false}
{"ts":1362516604765,"patch":[[{"diffs":[[0,"tabase')"],[1,"."],[0,"test_eba"]],"start1":35,"start2":35,"length1":16,"length2":17}]],"length":1583,"saved":false}
{"contributors":[],"silentsave":false,"ts":1362607978701,"patch":[[{"diffs":[[0,"    "],[-1,"start"],[0,"key:"]],"start1":403,"start2":403,"length1":13,"length2":8}]],"length":1578,"saved":false}
{"ts":1362608775150,"patch":[[{"diffs":[[0," };\n"],[-1,"\nexports.update = function(req, res) {\n    console.log(req.body)\n    db.save(req.body, function(err, documents) {\n        if (err) {\n            res.status(500);\n            res.end();\n        }\n        else {\n            db.get(documents.id, function(error, response) {\n                res.json(response)\n                res.end();\n            })\n        }\n\n    });\n}\n\nexports.create = function(req, res) {\n    collateAttachments(req, function(err, collated) {\n        var id = req.body.theme + \"-\" + req.body.product_type; // theme_name-product_type\n        db.save(id, {\n            _attachments: collated,\n            type: \"product\"\n        }, function(err, doc) {\n            console.log(err, doc)\n        })\n    })\n}\n\nexports.new = function(req, res) {\n    res.render('products/new.ejs', {\n        themes: themes,\n        product_types: product_types\n    })\n}"]],"start1":708,"start2":708,"length1":870,"length2":4}]],"length":712,"saved":false}
{"contributors":[],"silentsave":false,"ts":1362660998140,"patch":[[{"diffs":[[0,"ig/d"],[-1,"atabase"],[1,"b"],[0,"').t"]],"start1":30,"start2":30,"length1":15,"length2":9}]],"length":706,"saved":false}
{"contributors":[],"silentsave":false,"ts":1362665219090,"patch":[[{"diffs":[[0,") {\n"],[-1,"            console.log(t)\n"],[0,"    "]],"start1":320,"start2":320,"length1":35,"length2":8}]],"length":679,"saved":false}
{"ts":1362665323331,"patch":[[{"diffs":[[0,"\n    };\n"],[1,"\nfunction getTypes(type, callback) {\n    db.view('all/type', { key: type}, callback)\n}\n"]],"start1":671,"start2":671,"length1":8,"length2":95}]],"length":766,"saved":false}
{"ts":1362665412513,"patch":[[{"diffs":[[0,"req, res) {\n"],[1,"        getTypes('theme', function(err, documents) {\n            if(err) {\n                console.log(err)\n            }\n            else {\n                getTypes('product_type', function(error, docs) {\n                    if(error) {\n                        console.log(err)\n                    } else {\n                        \n                    }\n                })\n            }\n        })\n"],[0,"        db.v"]],"start1":225,"start2":225,"length1":24,"length2":423},{"diffs":[[0,"w('all/type', {\n"],[-1,""],[0,"            key:"]],"start1":650,"start2":650,"length1":32,"length2":32},{"diffs":[[0," type}, "],[-1,"callback"],[1,"function(error, docs) {\n        if(error) {\n            console.log(error)\n        } else {\n            callback(docs.toArray())\n        }\n    }"],[0,")\n}\n"]],"start1":1145,"start2":1145,"length1":20,"length2":156}]],"length":1301,"saved":false}
{"ts":1362665473975,"patch":[[{"diffs":[[0,"', function("],[-1,"err, document"],[1,"theme"],[0,"s) {\n       "]],"start1":260,"start2":260,"length1":37,"length2":29},{"diffs":[[0,"    "],[-1,"if(err) {\n                console.log(err)\n            }\n            else"],[1,"getTypes('product_type', function(product_types)"],[0," {\n "]],"start1":290,"start2":290,"length1":81,"length2":56},{"diffs":[[0,"etTypes('product"],[-1,"_type"],[0,"', function(erro"]],"start1":362,"start2":362,"length1":37,"length2":32},{"diffs":[[0,"', function("],[-1,"error, doc"],[1,"product"],[0,"s) {\n       "]],"start1":378,"start2":378,"length1":34,"length2":31},{"diffs":[[0,"            "],[-1," if(error)"],[1,"res.render(\"admin/products/index\","],[0," {\n         "]],"start1":409,"start2":409,"length1":34,"length2":58},{"diffs":[[0,"    "],[-1,"    console.log(err)"],[1,"products: products,"],[0,"\n   "]],"start1":474,"start2":474,"length1":28,"length2":27},{"diffs":[[0,"            "],[-1,"} else {"],[1,"themes: themes,"],[0,"\n           "]],"start1":506,"start2":506,"length1":32,"length2":39},{"diffs":[[0,"        "],[-1,"    "],[1,"product_types: product_types"],[0,"\n       "]],"start1":546,"start2":546,"length1":20,"length2":44},{"diffs":[[0,"                "],[-1,"    "],[0,"}"],[1,")"],[0,"\n               "]],"start1":583,"start2":583,"length1":37,"length2":34},{"diffs":[[0,"             })\n"],[-1,""],[0,"    "],[1,"        })\n"],[0,"        }\n      "]],"start1":605,"start2":605,"length1":36,"length2":47}]],"length":1322,"saved":false}
{"ts":1362665493939,"patch":[[{"diffs":[[0,"                "],[1," "],[0,"res.render(\"admi"]],"start1":405,"start2":405,"length1":32,"length2":33},{"diffs":[[0,"                "],[1,"    "],[0,"products: produc"]],"start1":463,"start2":463,"length1":32,"length2":36},{"diffs":[[0,"oducts,\n"],[1,"    "],[0,"        "]],"start1":495,"start2":495,"length1":16,"length2":20},{"diffs":[[0,"                "],[1,"    "],[0,"product_types: p"]],"start1":547,"start2":547,"length1":32,"length2":36},{"diffs":[[0,": product_types\n"],[1,"    "],[0,"                "]],"start1":580,"start2":580,"length1":32,"length2":36},{"diffs":[[0,"             })\n"],[1,"\n"],[0,"            })\n "]],"start1":622,"start2":622,"length1":32,"length2":33},{"diffs":[[0,"     })\n"],[-1,"        }\n"],[0,"        "]],"start1":646,"start2":646,"length1":26,"length2":16},{"diffs":[[0,"    "],[-1,"    db.view('all/type', {\n            key: 'theme'\n        }, function(error, t) {\n    "],[1,"}\n\n    function getTypes(type, callback) {\n"],[0,"    "]],"start1":665,"start2":665,"length1":95,"length2":51},{"diffs":[[0,"    "],[-1," "],[-1,"   "],[0,"key: "],[-1,"'product',"],[1,"type"],[0,"\n   "]],"start1":750,"start2":750,"length1":27,"length2":17},{"diffs":[[0,"        "],[-1,"    "],[0,"}, funct"]],"start1":764,"start2":764,"length1":20,"length2":16},{"diffs":[[0,"(err"],[1,"or"],[0,", doc"],[-1,"ument"],[0,"s) {"]],"start1":783,"start2":783,"length1":18,"length2":15},{"diffs":[[0,"    "],[-1,"    res.render(\"admin/products/index\", {\n                    products: documents.toArray(),\n                    themes: t.toArray(),\n                    product_types: product_types\n                }"],[1,"if (error) {\n                console.log(error"],[0,")\n  "]],"start1":807,"start2":807,"length1":207,"length2":54},{"diffs":[[0,"   }"],[-1,");"],[0,"\n   "]],"start1":868,"start2":868,"length1":10,"length2":8},{"diffs":[[0,"    "],[-1,"})\n"],[0,"    "],[-1,"};\n\nfunction getTypes(type, callback) {\n    db.view('all/type', { key: type}, function(error, docs) {\n        if(error) {\n            console.log(error)\n        } "],[0,"else {\n"],[1,"    "],[0,"    "]],"start1":877,"start2":877,"length1":185,"length2":23},{"diffs":[[0,"    "],[-1,"}\n"],[1,"    }\n  "],[0,"    "],[1,"  "],[0,"})\n"],[1,"    "],[0,"}\n"]],"start1":937,"start2":937,"length1":15,"length2":27}]],"length":964,"saved":false}
