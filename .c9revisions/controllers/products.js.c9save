{"ts":1349806028802,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var db = require('couchdb-migrator').db,\nasync = require('async'),\nfs = require('fs'), \nthemes = [\"ace_of_hearts\", \"simplicity\", \"rose\", \"chequers\", \"birds_of_paradise\", \"border\"],\nproduct_types = [\"invitation\", \"name_place\", \"wrap\", \"rsvp\", \"envelope\"]\n\nexports.show = function(req, res) {\n    \n        res.type(\"image/png\");\n    var stream = db.getAttachment(req.params[\"id\"], req.params[\"filename\"])\n    stream.on(\"data\", function(chunk) {\n       res.write(chunk)\n    });\n    stream.on('end', function() {\n        res.end(); \n    });\n}\nexports.update = function(req, res) {\n    db.save(req.body, function(err, documents) {\n        if(err) {\n            console.log(err)\n            res.status(500);\n            res.end();\n        } else {\n            console.log(\"DONE\", documents);\n            req.body._rev = documents.rev;\n            res.json(req.body)\n            res.end();\n        }\n    });\n}\n\nexports.index = function(req, res) {\n    console.log(req.accepted);\n    db.view('all/type', { key: 'product' }, function(err, documents) {\n        res.render(\"products/index\", { products: documents.toArray(), themes: themes, product_types: product_types } )\n    });\n};\n\nexports.create =  function(req, res) {\n    collateAttachments(req, function(err,collated) {\n        var id = req.body.theme + \"-\" + req.body.product_type; // theme_name-product_type\n       db.save(id, { _attachments: collated, type: \"product\"}, function(err, doc) {\n           console.log(err,doc)\n       })\n    })\n}\n\nfunction collateAttachments(req,callback) {\n var collated = {}\n    async.forEach(Object.keys(req.files), function(key, callback) {\n        var thisFile = req.files[key];\n        if (thisFile.size > 0) {\n        fs.readFile(thisFile.path, function(err, data) {\n            \n            collated[key] = {}\n            collated[key][\"content_type\"] = \"image/png\";\n            collated[key][\"data\"] = data.toString('base64');\n          \n          callback(err);\n        })\n        }\n        else {\n            callback(null)\n        }\n    }, function(err) {\n        if (err == null) {\n            callback(null, collated)\n        }\n        else {\n            callback(null)\n        }\n    })   \n}\nexports.new = \n    function(req, res) {\n    res.render('products/new.ejs', { themes: themes, product_types: product_types })\n}"]],"start1":0,"start2":0,"length1":0,"length2":2310}]],"length":2310}
{"contributors":[],"silentsave":false,"ts":1349975029180,"patch":[[{"diffs":[[0,"ator').d"],[-1,"b"],[1,"atabases.test_ebay"],[0,",\nasync "]],"start1":30,"start2":30,"length1":17,"length2":34},{"diffs":[[0,"tream = "],[-1,"db"],[0,".getAtta"]],"start1":353,"start2":353,"length1":18,"length2":16}]],"length":2325,"saved":false}
{"ts":1349975063143,"patch":[[{"diffs":[[0,"tream = "],[1,"db"],[0,".getAtta"]],"start1":353,"start2":353,"length1":16,"length2":18}]],"length":2327,"saved":false}
{"contributors":[],"silentsave":false,"ts":1351448525666,"patch":[[{"diffs":[[0,"t_ebay,\n"],[1,"    "],[0,"async = "]],"start1":50,"start2":50,"length1":16,"length2":20},{"diffs":[[0,"sync'),\n"],[1,"    "],[0,"fs = req"]],"start1":80,"start2":80,"length1":16,"length2":20},{"diffs":[[0,"e('fs'),"],[-1," "],[0,"\n"],[1,"    "],[0,"themes ="]],"start1":103,"start2":103,"length1":18,"length2":21},{"diffs":[[0,"rder\"],\n"],[1,"    "],[0,"product_"]],"start1":201,"start2":201,"length1":16,"length2":20},{"diffs":[[0,"\"]\n\n"],[-1,"exports.show = function(req, res) {\n    \n        res.type(\"image/png\");\n    var stream = db.getAttachment(req.params[\"id\"], req.params[\"filename\"])\n    stream.on(\"data\", function(chunk) {\n       res.write(chunk)\n    });\n    stream.on('end', function() {\n        res.end(); \n    });\n}\n"],[1,"    "],[0,"expo"]],"start1":283,"start2":283,"length1":292,"length2":12},{"diffs":[[0,"req, res) {\n"],[1,"    "],[0,"    db.save("]],"start1":317,"start2":317,"length1":24,"length2":28},{"diffs":[[0,"        "],[1," "],[1,"   "],[0,"if"],[1," "],[0,"(err) {\n"]],"start1":382,"start2":382,"length1":18,"length2":23},{"diffs":[[0,") {\n            "],[1,"   "],[1," "],[0,"console.log(err)"]],"start1":401,"start2":401,"length1":32,"length2":36},{"diffs":[[0,"og(err)\n"],[1,"    "],[0,"        "]],"start1":430,"start2":430,"length1":16,"length2":20},{"diffs":[[0,"0);\n            "],[1,"   "],[1," "],[0,"res.end();\n     "]],"start1":467,"start2":467,"length1":32,"length2":36},{"diffs":[[0,"    "],[-1,"}"],[1,"    }\n           "],[0," else {\n"],[1,"    "],[0,"    "]],"start1":502,"start2":502,"length1":17,"length2":37},{"diffs":[[0,"        "],[1,"  "],[1,"  "],[0,"req.body"]],"start1":583,"start2":583,"length1":16,"length2":20},{"diffs":[[0,"            "],[1,"    "],[0,"res.json(req"]],"start1":626,"start2":626,"length1":24,"length2":28},{"diffs":[[0,"dy)\n            "],[1,"  "],[1,"  "],[0,"res.end();\n     "]],"start1":657,"start2":657,"length1":32,"length2":36},{"diffs":[[0,"    "],[-1,"}\n"],[1,"    }\n  "],[0,"    "],[1,"  "],[0,"});\n"],[1,"    "],[0,"}\n\ne"]],"start1":692,"start2":692,"length1":18,"length2":30},{"diffs":[[0,"type', {"],[1,"\n       "],[0," key: 'p"]],"start1":806,"start2":806,"length1":16,"length2":24},{"diffs":[[0,"product'"],[1,"\n   "],[0," }, func"]],"start1":829,"start2":829,"length1":16,"length2":20},{"diffs":[[0,"ndex\", {"],[1,"\n           "],[0," product"]],"start1":902,"start2":902,"length1":16,"length2":28},{"diffs":[[0,"Array(),"],[1,"\n           "],[0," themes:"]],"start1":945,"start2":945,"length1":16,"length2":28},{"diffs":[[0," themes: themes,"],[1,"\n           "],[0," product_types: "]],"start1":965,"start2":965,"length1":32,"length2":44},{"diffs":[[0,"ypes"],[1,"\n       "],[0," }"],[-1," "],[0,")\n  "]],"start1":1018,"start2":1018,"length1":11,"length2":18},{"diffs":[[0,"create ="],[-1," "],[0," functio"]],"start1":1054,"start2":1054,"length1":17,"length2":16},{"diffs":[[0,"ion(err,"],[1," "],[0,"collated"]],"start1":1117,"start2":1117,"length1":16,"length2":17},{"diffs":[[0,"ct_type\n"],[1," "],[0,"       d"]],"start1":1220,"start2":1220,"length1":16,"length2":17},{"diffs":[[0,"ve(id, {"],[1,"\n           "],[0," _attach"]],"start1":1241,"start2":1241,"length1":16,"length2":28},{"diffs":[[0,"ollated,"],[1,"\n           "],[0," type: \""]],"start1":1277,"start2":1277,"length1":16,"length2":28},{"diffs":[[0,"product\""],[1,"\n        "],[0,"}, funct"]],"start1":1305,"start2":1305,"length1":16,"length2":25},{"diffs":[[0,"err, doc) {\n"],[1," "],[0,"           c"]],"start1":1334,"start2":1334,"length1":24,"length2":25},{"diffs":[[0,"err,"],[1," "],[0,"doc)\n"],[1," "],[0,"    "]],"start1":1370,"start2":1370,"length1":13,"length2":15},{"diffs":[[0,"nts(req,"],[1," "],[0,"callback"]],"start1":1425,"start2":1425,"length1":16,"length2":17},{"diffs":[[0,"back) {\n"],[1,"   "],[0," var col"]],"start1":1438,"start2":1438,"length1":16,"length2":19},{"diffs":[[0,"        "],[1,"  "],[1,"  "],[0,"fs.readF"]],"start1":1608,"start2":1608,"length1":16,"length2":20},{"diffs":[[0,") {\n"],[-1,"        "],[1,"\n"],[0,"    "],[-1,"\n"],[0,"    "]],"start1":1665,"start2":1665,"length1":21,"length2":13},{"diffs":[[0," {}\n            "],[1,"   "],[1," "],[0,"collated[key][\"c"]],"start1":1701,"start2":1701,"length1":32,"length2":36},{"diffs":[[0,"e/png\";\n"],[1,"    "],[0,"        "]],"start1":1758,"start2":1758,"length1":16,"length2":20},{"diffs":[[0,"se64');\n"],[-1," "],[1,"\n"],[0,"        "]],"start1":1823,"start2":1823,"length1":17,"length2":17},{"diffs":[[0,"        "],[-1,"\n"],[0,"       "],[-1,"   "],[0,"callback"]],"start1":1833,"start2":1833,"length1":27,"length2":23},{"diffs":[[0,"k(err);\n"],[1,"    "],[0,"        "]],"start1":1855,"start2":1855,"length1":16,"length2":20},{"diffs":[[0,"  })"],[-1,"   "],[0,"\n}\n"],[1,"\n"],[0,"expo"]],"start1":2091,"start2":2091,"length1":14,"length2":12},{"diffs":[[0,"s.new = "],[-1,"\n    "],[0,"function"]],"start1":2105,"start2":2105,"length1":21,"length2":16},{"diffs":[[0,".ejs', {"],[1,"\n       "],[0," themes:"]],"start1":2162,"start2":2162,"length1":16,"length2":24},{"diffs":[[0," themes,"],[1,"\n       "],[0," product"]],"start1":2186,"start2":2186,"length1":16,"length2":24},{"diffs":[[0,"ct_types"],[1,"\n   "],[0," })\n}"]],"start1":2223,"start2":2223,"length1":13,"length2":17}]],"length":2240,"saved":false}
{"contributors":[],"silentsave":false,"ts":1351451115535,"patch":[[{"diffs":[[0,"\"]\n\n    "],[1,"exports.show = function(req, res) {\nvar id = req.params.id;\n    db.get(id, function(error, document) {\n        res.render('catalog/product.ejs', {locals: document}); \n    });\n    };\n    \n"],[0,"exports."]],"start1":283,"start2":283,"length1":16,"length2":203},{"diffs":[[0,"req, res) {\n"],[-1,"    "],[0,"    db.save("]],"start1":504,"start2":504,"length1":28,"length2":24},{"diffs":[[0,") {\n        "],[-1,"    "],[0,"if (err) {\n "]],"start1":561,"start2":561,"length1":28,"length2":24},{"diffs":[[0,") {\n            "],[-1,"   "],[-1," "],[0,"console.log(err)"]],"start1":580,"start2":580,"length1":36,"length2":32},{"diffs":[[0,"og(err)\n"],[-1,"    "],[0,"        "]],"start1":605,"start2":605,"length1":20,"length2":16},{"diffs":[[0,"0);\n            "],[-1,"   "],[-1," "],[0,"res.end();\n     "]],"start1":638,"start2":638,"length1":36,"length2":32},{"diffs":[[0,"    "],[-1,"    }\n  "],[1,"}\n"],[0,"        "],[-1,"  "],[0,"else {\n"],[-1,"    "],[0,"    "]],"start1":669,"start2":669,"length1":37,"length2":25},{"diffs":[[0,"        "],[-1,"  "],[-1,"  "],[0,"req.body"]],"start1":738,"start2":738,"length1":20,"length2":16},{"diffs":[[0,"            "],[-1,"    "],[0,"res.json(req"]],"start1":777,"start2":777,"length1":28,"length2":24},{"diffs":[[0,"dy)\n            "],[-1," "],[-1,"   "],[0,"res.end();\n     "]],"start1":804,"start2":804,"length1":36,"length2":32},{"diffs":[[0,"    "],[-1,"    "],[0,"}\n    "],[-1," "],[-1,"   "],[0,"});\n"],[-1,"    "],[0,"}\n\ne"]],"start1":835,"start2":835,"length1":30,"length2":18}]],"length":2371,"saved":false}
{"ts":1351451120391,"patch":[[{"diffs":[[0," res) {\n"],[1,"        "],[0,"var id ="]],"start1":319,"start2":319,"length1":16,"length2":24},{"diffs":[[0,"ams.id;\n"],[1,"    "],[0,"    db.g"]],"start1":351,"start2":351,"length1":16,"length2":20},{"diffs":[[0,"ment) {\n        "],[1," "],[1,"   "],[0,"res.render('cata"]],"start1":398,"start2":398,"length1":32,"length2":36},{"diffs":[[0,"', {"],[-1,"locals: document}); \n"],[1,"\n                locals: document\n            });\n    "],[0,"    "]],"start1":449,"start2":449,"length1":29,"length2":62},{"diffs":[[0,"\n    };\n"],[-1,"    "],[0,"\nexports"]],"start1":514,"start2":514,"length1":20,"length2":16}]],"length":2416,"saved":false}
{"ts":1351451347820,"patch":[[{"diffs":[[0,"ams.id;\n"],[1,"        console.log(id);\n"],[0,"        "]],"start1":351,"start2":351,"length1":16,"length2":41}]],"length":2441,"saved":false}
{"ts":1351451466263,"patch":[[{"diffs":[[0,"req, res) {\n"],[1,"        console.log(req.params);\n"],[0,"        var "]],"start1":315,"start2":315,"length1":24,"length2":57}]],"length":2474,"saved":false}
{"ts":1351451495746,"patch":[[{"diffs":[[0,") {\n"],[-1,"        console.log(req.params);\n"],[0,"    "]],"start1":323,"start2":323,"length1":41,"length2":8},{"diffs":[[0,".params."],[-1,"id"],[1,"product"],[0,";\n      "]],"start1":347,"start2":347,"length1":18,"length2":23}]],"length":2446,"saved":false}
{"ts":1351451499626,"patch":[[{"diffs":[[0,"ct;\n"],[-1,"        console.log(id);\n"],[0,"    "]],"start1":360,"start2":360,"length1":33,"length2":8}]],"length":2421,"saved":false}
{"contributors":[],"silentsave":false,"ts":1351454994139,"patch":[[{"diffs":[[0,"  };"],[-1,"\n\nexports.update = function(req, res) {\n    db.save(req.body, function(err, documents) {\n        if (err) {\n            console.log(err)\n            res.status(500);\n            res.end();\n        }\n        else {\n            console.log(\"DONE\", documents);\n            req.body._rev = documents.rev;\n            res.json(req.body)\n            res.end();\n        }\n    });\n}\n\nexports.index = function(req, res) {\n    console.log(req.accepted);\n    db.view('all/type', {\n        key: 'product'\n    }, function(err, documents) {\n        res.render(\"products/index\", {\n            products: documents.toArray(),\n            themes: themes,\n            product_types: product_types\n        })\n    });\n};\n\nexports.create = function(req, res) {\n    collateAttachments(req, function(err, collated) {\n        var id = req.body.theme + \"-\" + req.body.product_type; // theme_name-product_type\n        db.save(id, {\n            _attachments: collated,\n            type: \"product\"\n        }, function(err, doc) {\n            console.log(err, doc)\n        })\n    })\n}\n\nfunction collateAttachments(req, callback) {\n    var collated = {}\n    async.forEach(Object.keys(req.files), function(key, callback) {\n        var thisFile = req.files[key];\n        if (thisFile.size > 0) {\n            fs.readFile(thisFile.path, function(err, data) {\n\n                collated[key] = {}\n                collated[key][\"content_type\"] = \"image/png\";\n                collated[key][\"data\"] = data.toString('base64');\n\n                callback(err);\n            })\n        }\n        else {\n            callback(null)\n        }\n    }, function(err) {\n        if (err == null) {\n            callback(null, collated)\n        }\n        else {\n            callback(null)\n        }\n    })\n}\n\nexports.new = function(req, res) {\n    res.render('products/new.ejs', {\n        themes: themes,\n        product_types: product_types\n    })\n}"]],"start1":522,"start2":522,"length1":1899,"length2":4}]],"length":526,"saved":false}
{"ts":1351455016575,"patch":[[{"diffs":[[0,"ebay"],[-1,",\n    async = require('async'),\n    fs = require('fs'),\n    themes = [\"ace_of_hearts\", \"simplicity\", \"rose\", \"chequers\", \"birds_of_paradise\", \"border\"],\n    product_types = [\"invitation\", \"name_place\", \"wrap\", \"rsvp\", \"envelope\"]\n\n    "],[1,";\n\n"],[0,"expo"]],"start1":52,"start2":52,"length1":243,"length2":11},{"diffs":[[0,"req, res) {\n"],[-1,"    "],[0,"    var id ="]],"start1":83,"start2":83,"length1":28,"length2":24},{"diffs":[[0,"roduct;\n"],[-1,"    "],[0,"    db.g"]],"start1":120,"start2":120,"length1":20,"length2":16},{"diffs":[[0,"        "],[-1,"    "],[0,"res.rend"]],"start1":171,"start2":171,"length1":20,"length2":16},{"diffs":[[0,"ejs', {\n"],[-1,"    "],[0,"        "]],"start1":207,"start2":207,"length1":20,"length2":16},{"diffs":[[0,"ent\n"],[-1,"            });\n"],[0,"    "]],"start1":240,"start2":240,"length1":24,"length2":8},{"diffs":[[0,"});\n    "],[-1,""],[0,""],[1,"});\n"],[0,"};"]],"start1":252,"start2":252,"length1":10,"length2":14}]],"length":266,"saved":false}
{"contributors":[],"silentsave":false,"ts":1351612330587,"patch":[[{"diffs":[[0,"  });\n};"],[1,"\n\n\nexports.update = function(req, res) {\n    console.log(req.body);\n    //db.save(req.body, function(err, documents) {\n    //    if (err) {\n    //        console.log(err)\n    //        res.status(500);\n    //        res.end();\n    //    }\n    //    else {\n    //        console.log(\"DONE\", documents);\n    //        req.body._rev = documents.rev;\n    //        res.json(req.body)\n    //        res.end();\n    //    }\n    //});\n}\n"]],"start1":258,"start2":258,"length1":8,"length2":437}]],"length":695,"saved":false}
{"ts":1351613145012,"patch":[[{"diffs":[[0,"});\n};\n\n"],[-1,"\n"],[0,"exports."]],"start1":260,"start2":260,"length1":17,"length2":16},{"diffs":[[0,"y);\n    "],[-1,"//"],[0,"db.save("]],"start1":329,"start2":329,"length1":18,"length2":16},{"diffs":[[0,"ents) {\n    "],[-1,"//"],[0,"    if (err)"]],"start1":374,"start2":374,"length1":26,"length2":24},{"diffs":[[0,"(err) {\n    "],[-1,"//"],[0,"        cons"]],"start1":393,"start2":393,"length1":26,"length2":24},{"diffs":[[0,"og(err)\n    "],[-1,"//"],[0,"        res."]],"start1":422,"start2":422,"length1":26,"length2":24},{"diffs":[[0,"s(500);\n    "],[-1,"//"],[0,"        res."]],"start1":451,"start2":451,"length1":26,"length2":24},{"diffs":[[0," res.end();\n    "],[-1,"//"],[0,"    }\n    //    "]],"start1":470,"start2":470,"length1":34,"length2":32},{"diffs":[[0,"      }\n    "],[-1,"//"],[0,"    else {\n "]],"start1":484,"start2":484,"length1":26,"length2":24},{"diffs":[[0," else {\n    "],[-1,"//"],[0,"        cons"]],"start1":499,"start2":499,"length1":26,"length2":24},{"diffs":[[0,"ments);\n    "],[-1,"//"],[0,"        req."]],"start1":543,"start2":543,"length1":26,"length2":24},{"diffs":[[0,"ts.rev;\n    "],[-1,"//"],[0,"        res."]],"start1":586,"start2":586,"length1":26,"length2":24},{"diffs":[[0,"q.body)\n    "],[-1,"//"],[0,"        res."]],"start1":617,"start2":617,"length1":26,"length2":24},{"diffs":[[0,"();\n    "],[-1,"//"],[0,"    }\n  "]],"start1":644,"start2":644,"length1":18,"length2":16},{"diffs":[[0,"    "],[-1,"//"],[0,"});\n"]],"start1":658,"start2":658,"length1":10,"length2":8}]],"length":668,"saved":false}
{"contributors":[],"silentsave":false,"ts":1352059653764,"patch":[[{"diffs":[[0,"document) {\n"],[1,"        res.format({\n            json: function() {\n                console.log(res);s\n                res.json(document)\n            },\n            html: function() {\n        "],[0,"        res."]],"start1":159,"start2":159,"length1":24,"length2":200},{"diffs":[[0,"        "],[1," "],[1,"       "],[0,"locals: "]],"start1":395,"start2":395,"length1":16,"length2":24},{"diffs":[[0,"        "],[1,"      "],[1,"  "],[0,"});\n"],[1,"            }\n        })\n"],[0,"    });\n"]],"start1":428,"start2":428,"length1":20,"length2":53}]],"length":885,"saved":false}
{"ts":1352059746832,"patch":[[{"diffs":[[0,"og(res);"],[-1,"s"],[0,"\n       "]],"start1":248,"start2":248,"length1":17,"length2":16}]],"length":884,"saved":false}
{"ts":1352059865926,"patch":[[{"diffs":[[0,"ole.log("],[-1,"res"],[1,"document"],[0,");\n     "]],"start1":243,"start2":243,"length1":19,"length2":24}]],"length":889,"saved":false}
{"contributors":[],"silentsave":false,"ts":1362348019807,"patch":[[{"diffs":[[0,"eq.body);\n  "],[1,"//"],[0,"  db.save(re"]],"start1":544,"start2":544,"length1":24,"length2":26},{"diffs":[[0,"uments) {\n  "],[-1," "],[1,"//"],[0,"     if (err"]],"start1":595,"start2":595,"length1":25,"length2":26},{"diffs":[[0,"f (err) {\n  "],[-1," "],[1,"//"],[0,"         con"]],"start1":615,"start2":615,"length1":25,"length2":26},{"diffs":[[0,".log(err)\n  "],[1,"//"],[0,"          re"]],"start1":645,"start2":645,"length1":24,"length2":26},{"diffs":[[0," //         "],[-1," "],[0,"res.status(5"]],"start1":656,"start2":656,"length1":25,"length2":24},{"diffs":[[0,"tus(500);\n  "],[-1," "],[1,"//"],[0,"         res"]],"start1":675,"start2":675,"length1":25,"length2":26},{"diffs":[[0,"   res.end();\n  "],[-1," "],[1,"//"],[0,"     }\n        e"]],"start1":695,"start2":695,"length1":33,"length2":34},{"diffs":[[0," //     }\n  "],[-1," "],[1,"//"],[0,"     else {\n"]],"start1":710,"start2":710,"length1":25,"length2":26},{"diffs":[[0,"   else {\n  "],[-1," "],[1,"//"],[0,"         con"]],"start1":726,"start2":726,"length1":25,"length2":26},{"diffs":[[0,"cuments);\n  "],[-1," "],[1,"//"],[0,"         req"]],"start1":771,"start2":771,"length1":25,"length2":26},{"diffs":[[0,"ents.rev;\n  "],[-1," "],[1,"//"],[0,"         res"]],"start1":815,"start2":815,"length1":25,"length2":26},{"diffs":[[0,"req.body)\n  "],[-1," "],[1,"//"],[0,"         res"]],"start1":847,"start2":847,"length1":25,"length2":26},{"diffs":[[0,"es.end();\n  "],[-1," "],[1,"//"],[0,"     }\n    }"]],"start1":871,"start2":871,"length1":25,"length2":26},{"diffs":[[0,"    }\n  "],[-1," "],[1,"//"],[0," });\n}\n"]],"start1":886,"start2":886,"length1":16,"length2":17}]],"length":903,"saved":false}
{"contributors":[],"silentsave":false,"ts":1362403003197,"patch":[[{"diffs":[[0,"ody);\n  "],[-1,"//"],[0,"  db.sav"]],"start1":548,"start2":548,"length1":18,"length2":16},{"diffs":[[0,"uments) {\n  "],[-1,"//"],[0,"     if (err"]],"start1":593,"start2":593,"length1":26,"length2":24},{"diffs":[[0,"f (err) {\n  "],[-1,"//"],[0,"         con"]],"start1":611,"start2":611,"length1":26,"length2":24},{"diffs":[[0,".log(err)\n  "],[-1,"//"],[0,"         res"]],"start1":639,"start2":639,"length1":26,"length2":24},{"diffs":[[0,"tus(500);\n  "],[-1,"//"],[0,"         res"]],"start1":667,"start2":667,"length1":26,"length2":24},{"diffs":[[0,"   res.end();\n  "],[-1,"//"],[0,"     }\n  //     "]],"start1":685,"start2":685,"length1":34,"length2":32},{"diffs":[[0,"    }\n  "],[-1,"//"],[0,"     els"]],"start1":702,"start2":702,"length1":18,"length2":16},{"diffs":[[0,"lse {\n  "],[-1,"//"],[1,"         console.log(documents);\n "],[0,"      "],[1,"//"],[0,"   "],[1," "],[0,"console."]],"start1":716,"start2":716,"length1":27,"length2":62},{"diffs":[[0,"cuments);\n  "],[-1,"//"],[0,"       "],[1,"//"],[0,"  req.body._"]],"start1":792,"start2":792,"length1":33,"length2":33},{"diffs":[[0,".rev;\n  "],[-1,"//"],[0,"       "],[1,"//"],[0,"  res.js"]],"start1":840,"start2":840,"length1":25,"length2":25},{"diffs":[[0,")\n  "],[-1,"//"],[0,"       "],[1,"//"],[0,"  re"]],"start1":876,"start2":876,"length1":17,"length2":17},{"diffs":[[0,"nd();\n  "],[-1,"//"],[0,"     }\n "]],"start1":896,"start2":896,"length1":18,"length2":16},{"diffs":[[0,"    }\n  "],[-1,"//"],[0," });\n}\n"]],"start1":905,"start2":905,"length1":17,"length2":15}]],"length":920,"saved":false}
{"ts":1362403019345,"patch":[[{"diffs":[[0,") {\n"],[-1,"    console.log(req.body);\n"],[0,"    "]],"start1":523,"start2":523,"length1":35,"length2":8}]],"length":893,"saved":false}
{"ts":1362403301176,"patch":[[{"diffs":[[0,"est_ebay"],[1,".\n_ = require('underscore')"],[0,";\n\nexpor"]],"start1":48,"start2":48,"length1":16,"length2":43},{"diffs":[[0,"documents);\n"],[1,"           for (key in req.body._attachments) {\n           console.log(key)\n           })\n"],[0,"       //   "]],"start1":745,"start2":745,"length1":24,"length2":114}]],"length":1010,"saved":false}
{"ts":1362403303266,"patch":[[{"diffs":[[0,"           }"],[-1,")"],[0,"\n       //  "]],"start1":833,"start2":833,"length1":25,"length2":24}]],"length":1009,"saved":false}
{"ts":1362403306751,"patch":[[{"diffs":[[0,"   for ("],[1,"var "],[0,"key in r"]],"start1":765,"start2":765,"length1":16,"length2":20}]],"length":1013,"saved":false}
{"ts":1362403307963,"patch":[[{"diffs":[[0,"e {\n"],[-1,"           console.log(documents);\n"],[0,"    "]],"start1":718,"start2":718,"length1":43,"length2":8}]],"length":978,"saved":false}
{"ts":1362403383852,"patch":[[{"diffs":[[0,"est_ebay"],[-1,"."],[1,","],[0,"\n_ = req"]],"start1":48,"start2":48,"length1":17,"length2":17}]],"length":978,"saved":false}
{"ts":1362403431479,"patch":[[{"diffs":[[0,"achments) {\n"],[1,"           if(req.body._attachments[key].data) {\n    "],[0,"           c"]],"start1":762,"start2":762,"length1":24,"length2":77},{"diffs":[[0,"          }\n"],[1,"           }\n"],[0,"       //   "]],"start1":856,"start2":856,"length1":24,"length2":37}]],"length":1044,"saved":false}
{"ts":1362403488311,"patch":[[{"diffs":[[0,"t_ebay,\n"],[1,"    "],[0,"_ = requ"]],"start1":50,"start2":50,"length1":16,"length2":20},{"diffs":[[0,"\n       "],[1," "],[0,"if (err)"]],"start1":606,"start2":606,"length1":16,"length2":17},{"diffs":[[0," if (err) {\n"],[1," "],[0,"           c"]],"start1":614,"start2":614,"length1":24,"length2":25},{"diffs":[[0,"\n           "],[1," "],[0,"res.status(5"]],"start1":654,"start2":654,"length1":24,"length2":25},{"diffs":[[0,"s(500);\n"],[1," "],[0,"        "]],"start1":676,"start2":676,"length1":16,"length2":17},{"diffs":[[0,"d();\n       "],[1," "],[0,"}\n"],[1," "],[0,"       else "]],"start1":702,"start2":702,"length1":26,"length2":28},{"diffs":[[0,"    "],[-1,"for (var key in req.body._attachments) {\n           if(req.body._attachments[key].data"],[1," db.get(documents.id, function(error, response"],[0,") {\n"],[1," "],[0,"    "]],"start1":739,"start2":739,"length1":98,"length2":59},{"diffs":[[0,"log("],[-1,"key"],[1,"response"],[0,")\n  "]],"start1":817,"start2":817,"length1":11,"length2":16},{"diffs":[[0,"nse)\n           "],[-1,"}"],[1," })"],[0,"\n           }\n  "]],"start1":826,"start2":826,"length1":33,"length2":35},{"diffs":[[0," })\n        "],[-1,"   "],[0,"}\n"],[1," "],[0,"       //   "]],"start1":842,"start2":842,"length1":29,"length2":27},{"diffs":[[0,"s);\n        "],[-1," "],[0,"//  req.body"]],"start1":898,"start2":898,"length1":25,"length2":24},{"diffs":[[0,"ts.rev;\n"],[-1," "],[0,"        "]],"start1":937,"start2":937,"length1":17,"length2":16},{"diffs":[[0,"dy)\n        "],[-1," "],[0,"//  res.end("]],"start1":972,"start2":972,"length1":25,"length2":24},{"diffs":[[0,".end();\n"],[-1,"       }"],[0,"\n"],[1," "],[0,"   });\n}"]],"start1":991,"start2":991,"length1":25,"length2":18}]],"length":1010,"saved":false}
{"ts":1362403546137,"patch":[[{"diffs":[[0,"ebay"],[-1,",\n    _ = require('underscore')"],[0,";\n\ne"]],"start1":52,"start2":52,"length1":39,"length2":8},{"diffs":[[0,"response) {\n"],[1,"\n"],[0,"            "]],"start1":750,"start2":750,"length1":24,"length2":25},{"diffs":[[0,"        "],[-1,"console.log"],[1,"res.json"],[0,"(respons"]],"start1":771,"start2":771,"length1":27,"length2":24},{"diffs":[[0,"    "],[-1," })\n"],[0,"     "],[-1,"   }\n        //    console.log(\"DONE\", documents);\n        //  req.body._rev = documents.rev;\n        //  res.json(req.body)\n        //  res.end();"],[1,"res.end();\n            })\n        }"],[0,"\n\n  "]],"start1":805,"start2":805,"length1":164,"length2":48}]],"length":861,"saved":false}
{"ts":1362403551222,"patch":[[{"diffs":[[0,") {\n"],[-1,"            console.log(err)\n"],[0,"    "]],"start1":591,"start2":591,"length1":37,"length2":8},{"diffs":[[0,"onse) {\n"],[-1,"\n"],[0,"        "]],"start1":725,"start2":725,"length1":17,"length2":16}]],"length":831,"saved":false}
{"contributors":[],"silentsave":false,"ts":1362407438324,"patch":[[{"diffs":[[0,"req, res) {\n"],[1,"    console.log(req.body)\n"],[0,"    db.save("]],"start1":515,"start2":515,"length1":24,"length2":50}]],"length":857,"saved":false}
{"contributors":[],"silentsave":false,"ts":1362408841983,"patch":[[{"diffs":[[0,";\n};"],[-1,"\n\nexports.update = function(req, res) {\n    console.log(req.body)\n    db.save(req.body, function(err, documents) {\n        if (err) {\n            res.status(500);\n            res.end();\n        }\n        else {\n            db.get(documents.id, function(error, response) {\n                res.json(response)\n                res.end();\n            })\n        }\n\n    });\n}\n"]],"start1":483,"start2":483,"length1":374,"length2":4}]],"length":487,"saved":false}
{"contributors":[],"silentsave":false,"ts":1362408971869,"patch":[[{"diffs":[[0,"  });\n};"],[1,"\n\n\nexports.update = function(req, res) {\n    console.log(req.body)\n    db.save(req.body, function(err, documents) {\n        if (err) {\n            res.status(500);\n            res.end();\n        }\n        else {\n            db.get(documents.id, function(error, response) {\n                res.json(response)\n                res.end();\n            })\n        }\n\n    });\n}\n"]],"start1":479,"start2":479,"length1":8,"length2":379}]],"length":858,"saved":false}
{"contributors":[],"silentsave":false,"ts":1362409092799,"patch":[[{"diffs":[[0,"};\n\n"],[-1,"\nexports.update = function(req, res) {\n    console.log(req.body)\n    db.save(req.body, function(err, documents) {\n        if (err) {\n            res.status(500);\n            res.end();\n        }\n        else {\n            db.get(documents.id, function(error, response) {\n                res.json(response)\n                res.end();\n            })\n        }\n\n    });\n}\n"]],"start1":485,"start2":485,"length1":373,"length2":4}]],"length":489,"saved":false}
{"contributors":[],"silentsave":false,"ts":1362409110266,"patch":[[{"diffs":[[0,"});\n};\n\n"],[1,"\nexports.update = function(req, res) {\n    console.log(req.body)\n    db.save(req.body, function(err, documents) {\n        if (err) {\n            res.status(500);\n            res.end();\n        }\n        else {\n            db.get(documents.id, function(error, response) {\n                res.json(response)\n                res.end();\n            })\n        }\n\n    });\n}\n"]],"start1":481,"start2":481,"length1":8,"length2":377}]],"length":858,"saved":false}
{"contributors":[],"silentsave":false,"ts":1362409338247,"patch":[[{"diffs":[[0," if (err) {\n"],[1,"            console.log(err)\n"],[0,"            "]],"start1":610,"start2":610,"length1":24,"length2":53}]],"length":887,"saved":false}
{"contributors":[],"silentsave":false,"ts":1362409930499,"patch":[[{"diffs":[[0,"\n};\n"],[-1,"\n\nexports.update = function(req, res) {\n    console.log(req.body)\n    db.save(req.body, function(err, documents) {\n        if (err) {\n            console.log(err)\n            res.status(500);\n            res.end();\n        }\n        else {\n            db.get(documents.id, function(error, response) {\n                res.json(response)\n                res.end();\n            })\n        }\n\n    });\n}\n"]],"start1":484,"start2":484,"length1":403,"length2":4}]],"length":488,"saved":false}
{"contributors":[],"silentsave":false,"ts":1362410105380,"patch":[[{"diffs":[[0,"_ebay;\n\n"],[1,"exports.update = function(req, res) {\n    console.log(\"Updating\", req.body)\n    db.save(req.body, function(err, documents) {\n        if (err) {\n            res.status(500);\n            res.end();\n        }\n        else {\n            db.get(documents.id, function(error, response) {\n                res.json(response)\n                res.end();\n            })\n        }\n\n    });\n}\n"],[0,"exports."]],"start1":51,"start2":51,"length1":16,"length2":396}]],"length":868,"saved":false}
{"ts":1362410478512,"patch":[[{"diffs":[[0," if (err) {\n"],[1,"            console.log(\"ERROR\", err)\n"],[0,"            "]],"start1":191,"start2":191,"length1":24,"length2":62}]],"length":906,"saved":false}
{"ts":1362410718003,"patch":[[{"diffs":[[0,"body)\n  "],[1,"//"],[0,"  db.sav"]],"start1":129,"start2":129,"length1":16,"length2":18},{"diffs":[[0,"uments) {\n  "],[1,"//"],[0,"      if (er"]],"start1":176,"start2":176,"length1":24,"length2":26},{"diffs":[[0,"f (err) {\n  "],[1,"//"],[0,"          co"]],"start1":197,"start2":197,"length1":24,"length2":26},{"diffs":[[0,"OR\", err)\n  "],[1,"//"],[0,"          re"]],"start1":237,"start2":237,"length1":24,"length2":26},{"diffs":[[0,"tus(500);\n  "],[1,"//"],[0,"          re"]],"start1":268,"start2":268,"length1":24,"length2":26},{"diffs":[[0,"es.end();\n  "],[1,"//"],[0,"      }\n    "]],"start1":293,"start2":293,"length1":24,"length2":26},{"diffs":[[0,"//      }\n  "],[1,"//"],[0,"      else {"]],"start1":305,"start2":305,"length1":24,"length2":26},{"diffs":[[0,"   else {\n  "],[1,"//"],[0,"          db"]],"start1":322,"start2":322,"length1":24,"length2":26},{"diffs":[[0,"sponse) {\n  "],[1,"//"],[0,"            "]],"start1":385,"start2":385,"length1":24,"length2":26},{"diffs":[[0,"response)\n  "],[1,"//"],[0,"            "]],"start1":422,"start2":422,"length1":24,"length2":26},{"diffs":[[0,"es.end();\n  "],[1,"//"],[0,"          })"]],"start1":451,"start2":451,"length1":24,"length2":26},{"diffs":[[0,")\n  "],[1,"//"],[0,"      }\n"],[1,"//"],[0,"\n  "],[1,"//"],[0,"  })"]],"start1":476,"start2":476,"length1":19,"length2":25}]],"length":934,"saved":false}
{"ts":1362411410355,"patch":[[{"diffs":[[0,"q.body)\n"],[1,"    res.json(req.body);\n    res.end()\n"],[0,"  //  db"]],"start1":127,"start2":127,"length1":16,"length2":54}]],"length":972,"saved":false}
{"contributors":[],"silentsave":false,"ts":1362413171101,"patch":[[{"diffs":[[-1,"var db = require('couchdb-migrator').databases.test_ebay;\n"],[0,"\nexp"]],"start1":0,"start2":0,"length1":62,"length2":4}]],"length":914,"saved":false}
{"ts":1362414813571,"patch":[[{"diffs":[[1,"\n    db = require('couchdb-migrator').databases.test_ebay,"],[0,"\nexports.update "]],"start1":0,"start2":0,"length1":16,"length2":74}]],"length":931,"saved":false}
{"contributors":[],"silentsave":false,"ts":1362419617220,"patch":[[{"diffs":[[0,".end()\n "],[-1," //"],[0,"  db.sav"]],"start1":166,"start2":166,"length1":19,"length2":16},{"diffs":[[0,"ts) {\n  "],[-1,"//"],[0,"     "],[-1," "],[0,"if (err)"]],"start1":215,"start2":215,"length1":24,"length2":21},{"diffs":[[0,"if (err) {\n "],[-1," //"],[0,"          co"]],"start1":228,"start2":228,"length1":27,"length2":24},{"diffs":[[0,", err)\n "],[-1," //"],[0,"        "]],"start1":269,"start2":269,"length1":19,"length2":16},{"diffs":[[0,"tus(500);\n  "],[-1,"//"],[1,"         res.end();\n       }\n       else {\n           db.get(documents.id, function(error, response) {\n               res.json(response)\n     "],[0,"          re"]],"start1":294,"start2":294,"length1":26,"length2":166},{"diffs":[[0,";\n  "],[-1,"//"],[1,"   "],[0,"      }"],[1,")"],[0,"\n  "],[-1,"//"],[0,"     "],[1,"}\n\n   });\n}\nexports.destroy = function(req, res) {\n    db.remove(req.params.id, function(err, doc) {\n        console.log(err,doc)\n    })\n    \n}\nexports.create = function(req, res) {\n    console.log(\"Updating\", req.body)\n    res.json(req.body);\n    res.end()\n   db.save(req.body, function(err, documents) {\n       if (err) {\n           console.log(\"ERROR\", err)\n           res.status(500);\n           res.end();\n       }\n      "],[0," els"]],"start1":467,"start2":467,"length1":27,"length2":453},{"diffs":[[0,"    else {\n "],[-1," //"],[0,"          db"]],"start1":913,"start2":913,"length1":27,"length2":24},{"diffs":[[0,"nse) {\n "],[-1," //"],[0,"        "]],"start1":977,"start2":977,"length1":19,"length2":16},{"diffs":[[0,"ponse)\n "],[-1," //"],[0,"        "]],"start1":1011,"start2":1011,"length1":19,"length2":16},{"diffs":[[0,"nd();\n  "],[-1,"//"],[0,"        "]],"start1":1038,"start2":1038,"length1":18,"length2":16},{"diffs":[[0,"    "],[-1," "],[0,"})\n  "],[-1,"//"],[0,"     "],[-1," "],[0,"}\n"],[-1,"//\n  //"],[1,"\n "],[0,"  })"]],"start1":1051,"start2":1051,"length1":31,"length2":22}]],"length":1506,"saved":false}
{"ts":1362428438347,"patch":[[{"diffs":[[-1,"\n    "],[0,""],[1,""],[0,"db = req"]],"start1":0,"start2":0,"length1":13,"length2":8},{"diffs":[[0,"   res.end()\n   "],[1," "],[0,"db.save(req.body"]],"start1":155,"start2":155,"length1":32,"length2":33},{"diffs":[[0,"ments) {\n       "],[1," "],[0,"if (err) {\n     "]],"start1":208,"start2":208,"length1":32,"length2":33},{"diffs":[[0,"     if (err) {\n"],[1," "],[0,"           conso"]],"start1":220,"start2":220,"length1":32,"length2":33},{"diffs":[[0,"err)\n           "],[1," "],[0,"res.status(500);"]],"start1":269,"start2":269,"length1":32,"length2":33},{"diffs":[[0,"es.status(500);\n"],[1," "],[0,"           res.e"]],"start1":287,"start2":287,"length1":32,"length2":33},{"diffs":[[0,"s.end();\n       "],[1," "],[0,"}\n"],[1," "],[0,"       else {\n  "]],"start1":317,"start2":317,"length1":34,"length2":36},{"diffs":[[0,"\n        else {\n"],[1," "],[0,"           db.ge"]],"start1":335,"start2":335,"length1":32,"length2":33},{"diffs":[[0,"\n               "],[1," "],[0,"res.json(respons"]],"start1":411,"start2":411,"length1":32,"length2":33},{"diffs":[[0,".json(response)\n"],[1," "],[0,"               r"]],"start1":431,"start2":431,"length1":32,"length2":33},{"diffs":[[0,"d();\n           "],[1," "],[0,"})\n"],[1," "],[0,"       }\n\n   });"]],"start1":469,"start2":469,"length1":35,"length2":37},{"diffs":[[0,"  })\n        }\n\n"],[1," "],[0,"   });\n}\nexports"]],"start1":484,"start2":484,"length1":32,"length2":33},{"diffs":[[0,"eq.p"],[-1,"arams.id"],[1,"roduct.id, req.product.rev"],[0,", fu"]],"start1":564,"start2":564,"length1":16,"length2":34},{"diffs":[[0,"    "],[-1,"console.log(err,doc)"],[1,"if(err) {\n            console.log(err)\n        }\n        else {\n            res.status(200);\n            res.end()\n        }"],[0,"\n    })\n"],[-1,"    "],[0,""],[1,""],[0,"\n}\ne"]],"start1":621,"start2":621,"length1":40,"length2":140},{"diffs":[[0,"nd()\n   "],[1," "],[0,"db.save("]],"start1":869,"start2":869,"length1":16,"length2":17},{"diffs":[[0,"s) {\n       "],[1," "],[0,"if (err) {\n "]],"start1":918,"start2":918,"length1":24,"length2":25},{"diffs":[[0,"     if (err) {\n"],[1," "],[0,"           conso"]],"start1":926,"start2":926,"length1":32,"length2":33},{"diffs":[[0,"g(\"ERROR\", err)\n"],[1," "],[0,"           res.s"]],"start1":964,"start2":964,"length1":32,"length2":33},{"diffs":[[0,"00);\n           "],[1," "],[0,"res.end();\n     "]],"start1":1004,"start2":1004,"length1":32,"length2":33},{"diffs":[[0,"d();\n       "],[1," "],[0,"}\n"],[1," "],[0,"       else "]],"start1":1027,"start2":1027,"length1":26,"length2":28},{"diffs":[[0,"se {\n           "],[1," "],[0,"db.get(documents"]],"start1":1052,"start2":1052,"length1":32,"length2":33},{"diffs":[[0,"\n               "],[1," "],[0,"res.json(respons"]],"start1":1117,"start2":1117,"length1":32,"length2":33},{"diffs":[[0,".json(response)\n"],[1," "],[0,"               r"]],"start1":1137,"start2":1137,"length1":32,"length2":33},{"diffs":[[0,"\n           "],[1," "],[0,"})\n"],[1," "],[0,"       }\n\n  "]],"start1":1179,"start2":1179,"length1":27,"length2":29},{"diffs":[[0,"     }\n\n"],[1," "],[0,"   });\n}"]],"start1":1198,"start2":1198,"length1":16,"length2":17}]],"length":1645,"saved":false}
{"ts":1362428963664,"patch":[[{"diffs":[[0,"est_ebay"],[-1,","],[1,";\n"],[0,"\nexports"]],"start1":44,"start2":44,"length1":17,"length2":18},{"diffs":[[0,"   })\n        }\n"],[-1,"\n"],[0,"    });\n}\nexport"]],"start1":484,"start2":484,"length1":33,"length2":32},{"diffs":[[0,"      if"],[1," "],[0,"(err) {\n"]],"start1":619,"start2":619,"length1":16,"length2":17},{"diffs":[[0,"\n    })\n"],[-1,"\n"],[0,"}\n"],[1,""],[0,"exports."]],"start1":750,"start2":750,"length1":19,"length2":18},{"diffs":[[0,") {\n"],[-1,"    console.log(\"Updating\", req.body)\n    res.json(req.body);\n    res.end()\n"],[0,"    "]],"start1":794,"start2":794,"length1":84,"length2":8}]],"length":1569,"saved":false}
{"contributors":[],"silentsave":false,"ts":1362515488861,"patch":[[{"diffs":[[1,"var "],[0,"db = req"]],"start1":0,"start2":0,"length1":8,"length2":12},{"diffs":[[0,"re('"],[-1,"couchdb-migrator')."],[1,"./../config/"],[0,"database"],[-1,"s"],[1,"')"],[0,".tes"]],"start1":14,"start2":14,"length1":36,"length2":30}]],"length":1567,"saved":false}
